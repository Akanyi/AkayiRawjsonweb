<!DOCTYPE html>
<html>
<head>
<title>Minecraft 基岩版文本转 JSON</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/Main.css">
<link rel="stylesheet" href="css/Main2.css">
</head>
<body>

<!-- beta水印 -->
<div class="beta-watermark">BETA</div>

<h2>Minecraft基岩版 文本转JSON工具 </h2>

<!-- 提示 -->
<div class="beta-notice">
    <p>这个版本有未更正的问题，如果发现请大家原谅，可以去 <a href="https://github.com/Akanyi/AkayiRawjsonweb" target="_blank">GitHub</a> 提交问题。</p>
</div>

<div id="inputArea">
    
        <div id="richTextEditor" contenteditable="true" placeholder="在此输入文本。使用下方按钮插入格式代码或功能。"></div>
    

    <div class="feature-buttons">
        <button onclick="insertFeature('score')">插入计分板</button>
        <button onclick="insertFeature('selector')">插入选择器</button>
        <button onclick="insertFeature('translate')">插入翻译</button>
    </div>

    <div id="preview" class="preview-area" style="display:none;">
        <div id="previewContent"></div>
        <div class="preview-note">注：预览效果因为屏幕限制会自动换行，与实际游戏中不同，仅供参考</div>
    </div>

    <div id="colorButtons">
        <button onclick="insertCode('§0')">§0 黑</button>
        <button onclick="insertCode('§1')">§1 深蓝</button>
        <button onclick="insertCode('§2')">§2 深绿</button>
        <button onclick="insertCode('§3')">§3 湖蓝</button>
        <button onclick="insertCode('§4')">§4 深红</button>
        <button onclick="insertCode('§5')">§5 深紫</button>
        <button onclick="insertCode('§6')">§6 金</button>
        <button onclick="insertCode('§7')">§7 灰</button>
        <button onclick="insertCode('§8')">§8 深灰</button>
        <button onclick="insertCode('§9')">§9 蓝</button>
        <button onclick="insertCode('§a')">§a 绿</button>
        <button onclick="insertCode('§b')">§b 水蓝</button>
        <button onclick="insertCode('§c')">§c 红</button>
        <button onclick="insertCode('§d')">§d 紫</button>
        <button onclick="insertCode('§e')">§e 黄</button>
        <button onclick="insertCode('§f')">§f 白</button>
        <button onclick="insertCode('§k')">§k 随机</button>
        <button onclick="insertCode('§l')">§l 粗体</button>
        <button onclick="insertCode('§o')">§o 斜体</button>
        <button onclick="insertCode('§r')">§r 重置</button>
        <button onclick="insertCode('§g')">§g 材料：金币</button>
        <button onclick="insertCode('§h')">§h 材料：石英</button>
        <button onclick="insertCode('§i')">§i 材料：铁</button>
        <button onclick="insertCode('§j')">§j 材料：下界砖</button>
        <button onclick="insertCode('§m')">§m 材料：红石</button>
        <button onclick="insertCode('§n')">§n 材料：铜</button>
        <button onclick="insertCode('§p')">§p 材料：金</button>
        <button onclick="insertCode('§q')">§q 材料：绿宝石</button>
        <button onclick="insertCode('§s')">§s 材料：钻石</button>
        <button onclick="insertCode('§t')">§t 材料：青金石</button>
        <button onclick="insertCode('§u')">§u 材料：紫水晶</button>
        <button onclick="insertCode('§v')">§v 材料：树脂（1.22）</button>
    </div>

    <button id="generateJsonBtn" onclick="generateJson()">生成 JSON</button>
</div>

<h2>Raw JSON:</h2>
<pre id="jsonOutput"></pre>

<div class="menu">
    <button class="menu-button" onclick="toggleMenu()">⋮</button>
    <div class="menu-content" id="menuContent">
        <button onclick="openDecodeModal()">解析 JSON</button>
        <button onclick="openAboutModal()">关于</button>
        <button onclick="openChangelogModal()">更新日志</button>
        <a href="https://github.com/Akanyi/AkayiRawjsonweb" target="_blank">GitHub</a>
    </div>
</div>

<div id="decodeModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeDecodeModal()">&times;</span>
        <h3 id="modalTitle">解析 JSON(Preview)</h3>
        <textarea id="jsonInput" placeholder="在此输入 JSON"></textarea>
        <button onclick="decodeJson()">解析</button>
    </div>
</div>

<div id="aboutModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeAboutModal()">&times;</span>
        <h3 id="aboutTitle">关于</h3>
        <p>这是一个用于将文本转换为 JSON 的工具，适用于Minecraft 基岩版。</p>
        <p>作者：Akanyi</p>
        <p>GitHub 地址: <a href="https://github.com/Akanyi/AkayiRawjsonweb" target="_blank">https://github.com/Akanyi/AkayiRawjsonweb</a></p>
    </div>
</div>

<div id="changelogModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeChangelogModal()">&times;</span>
        <h3 id="changelogTitle">更新日志</h3>
        <ul>
            <li>版本 0.1.0 - 初始版本发布</li>
            <li>版本 0.1.1 - 添加 JSON 解析功能</li>
            <li>版本 0.1.2 - 添加关于页面和更新日志</li>
            <li>版本 0.1.3 - 修正部分设定</li>
            <li>版本 0.1.4 - 添加颜色，修复jsondecode，修复换行</li>
            <li>版本 0.1.5 - 添加教程，动画改进，预览改进，修复了json生成的小问题</li>
        </ul>
    </div>
</div>

<div id="functionModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal()">&times;</span>
        <h3 id="modalTitle">编辑功能</h3>
        <div class="modal-form" id="modalForm">
            <!-- 动态内容 -->
        </div>
    </div>
</div>

<!-- 教程折叠栏 -->
<div class="tutorial">
    <button class="tutorial-button" onclick="toggleTutorial(this)">教程</button>
    <div class="tutorial-content" id="tutorialContent">
        <h3>基本使用方法</h3>
        <div class="tutorial-section">
            <p>1. 在编辑器中输入文本。</p>
            <p>2. 使用下方按钮插入格式代码或功能。</p>
            <p>3. 点击"生成 JSON"按钮生成 JSON。</p>
            <p>4. 在"Raw JSON"区域查看生成的 JSON。</p>
            <p>5. 使用"复制"按钮复制 JSON。</p>
            <p>6. 使用"解析 JSON"解析你的 JSON。</p>
        </div>

        <h3>换行符说明</h3>
        <div class="tutorial-section">
            <p>在预览区域中，你可以看到两种不同的换行方式：</p>
            <ul>
                <li><strong>实际换行</strong>：以 <span class="line-break-example">↵</span> 符号标记，这是你通过按下回车键创建的换行。</li>
                <li><strong>自动换行</strong>：没有特殊标记，这是由于文本长度超过显示区域而自动换行。</li>
            </ul>
        </div>
        <div class="tutorial-note">
            注意：只有带有 ↵ 符号的换行才会在游戏中真正换行。自动换行仅用于显示目的，不会影响实际的文本布局。
        </div>

    </p>
        <h3>什么是Raw JSON？</h3>
        <div class="tutorial-section">
            <p>Raw JSON 是 Minecraft 基岩版中用于显示复杂文本的格式。它允许你在游戏中显示带有颜色、格式和功能的文本。</p>
            <p>Raw JSON 的基本结构是一个包含多个对象的数组，每个对象代表一段文本或一个功能。</p>
            <p>例如，以下是一个简单的 Raw JSON 示例：</p>
            <pre><code id="exampleJson1">{
    "rawtext": [
        {"text": "欢迎来到"},
        {"text": "§a§lMinecraft§r"},
        {"text": "世界！"}
    ]
}</code></pre>
            <button class="copy-example-button" onclick="copyExampleJson('exampleJson1')">复制</button>
            <button class="copy-example-button" onclick="copyExampleJsonPlain('exampleJson1')">复制纯文本</button>
            <p>这个示例将显示 "欢迎来到" 和 "世界！" 两段普通文本，中间插入一个绿色加粗的 "Minecraft"。</p>
        </div>

        <h3>创建你的第一个Raw JSON</h3>
        <div class="tutorial-section">
            <p>1. 在编辑器中输入以下文本：</p>
            <pre><code>欢迎来到§a§lMinecraft§r世界！</code></pre>
            <p>2. 点击"生成 JSON"按钮生成 JSON。</p>
            <p>3. 在"Raw JSON"区域查看生成的 JSON。</p>
            <p>4. 你将看到类似以下的 JSON 输出：</p>
            <pre><code id="exampleJson2">{
    "rawtext": [
        {"text": "欢迎来到"},
        {"text": "§a§lMinecraft§r"},
        {"text": "世界！"}
    ]
}</code></pre>
            <button class="copy-example-button" onclick="copyExampleJson('exampleJson2')">复制</button>
            <button class="copy-example-button" onclick="copyExampleJsonPlain('exampleJson2')">复制纯文本</button>
            <p>5. 你可以将这个 JSON 复制到 Minecraft 基岩版的命令方块或其他支持 Raw JSON 的地方，来显示带有颜色和格式的文本。</p>
        </div>
    </div>
</div>

<script src="js/Main.js"></script>
<script src="js/Main2.js"></script>
<script src="js/Main3.js"></script>
<script src="js/Main4.js"></script>
<script src="js/Main5.js"></script>

<script src="js/Decodejson.js"></script>
<script src="js/translate-utils.js"></script>
<script src="js/translate-mode.js"></script>

<script>
function copyExampleJson(elementId) {
    const jsonText = document.getElementById(elementId).textContent;
    navigator.clipboard.writeText(jsonText).then(() => {
        alert('JSON 已复制到剪贴板');
    });
}

function copyExampleJsonPlain(elementId) {
    const jsonText = document.getElementById(elementId).textContent;
    const plainText = JSON.stringify(JSON.parse(jsonText));
    navigator.clipboard.writeText(plainText).then(() => {
        alert('纯文本 JSON 已复制到剪贴板');
    });
}
</script>

<!--服了，PowerJsDebuger免费版最多300行，拆开js好烦！-->

</body>
</html>
